# C/C++的链接

理解ELF的链接，需要先明白[ELF中有什么](./ELF.md)

## 静态链接

通俗的讲，静态链接，就是讲一系列的ELF文件都塞到一个ELF文件中去，这样做非常容易理解，优点是运行的时候不需要依赖其他的东西，直接就可以运行，缺点就是文件会变大，而且当有某个ELF文件发生改变，比如函数中的一些信息修改了，那么就需要重新链接。

一般为相同节和节进行融合，比如`.data`和`.data`合成到一起。

![](./ELF_pic/4.png)

通过扫描每个ELF文件，计算出其大小，链接器为其分配大小空间用于存储，这是第一步，

后续还有很多需要调整的，如符号的地址和重定位，符号地址是指的当一个程序从磁盘被加载到虚拟内存中时所在的地址，当一个符号在ELF文件中时，都是关于某个节的偏移，比如`.text`节的0x20偏移，而`.text`在被加载到内存中是有一个固定的内存地址的。